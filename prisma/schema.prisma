// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Endereco {
  id    Int     @default(autoincrement()) @id
  rua String  
  cidade String  
  estado String  
  bairro String  
  cep String  
  numero String  
  
  criadoEm DateTime @default(now())
  atualizadoEm DateTime?
  removidoEm DateTime? 

  firmas Firma[]
  usuarios Usuario[]
  clientes Cliente[]
}

model Firma {
  id    Int     @default(autoincrement()) @id
  nome String  
  email String  @unique
  telefone String  @unique
  endereco   Endereco   @relation(fields: [enderecoID], references: [id])
  enderecoID Int

  criadoEm DateTime @default(now())
  atualizadoEm DateTime?
  removidoEm DateTime? 
}

model Usuario {
  id    Int     @default(autoincrement()) @id
  nome String  
  email String  @unique
  login String  @unique
  senha String  
  telefone String  @unique
  cpf String  @unique
  rg String  @unique
  cargo String  
  endereco   Endereco   @relation(fields: [enderecoID], references: [id])
  enderecoID Int

  criadoPor Int 
  criadoEm DateTime @default(now())
  atualizadoPor Int? 
  atualizadoEm DateTime?
  removidoPor Int? 
  removidoEm DateTime?
}


model TipoProcesso {
  id    Int     @default(autoincrement()) @id
  nome String  

  criadoPor Int 
  criadoEm DateTime @default(now())
  atualizadoPor Int? 
  atualizadoEm DateTime?
  removidoPor Int? 
  removidoEm DateTime?

  formulariosPadrao FormularioPadrao[]
  processos Processo[]
}


model FormularioPadrao {
  id    Int     @default(autoincrement()) @id
  nome String  
  url String  
  formato String  
  processo TipoProcesso @relation(fields: [tipoProcessoID], references: [id])
  tipoProcessoID Int  

  criadoPor Int 
  criadoEm DateTime @default(now()) 
  atualizadoPor Int? 
  atualizadoEm DateTime?
  removidoPor Int? 
  removidoEm DateTime?
}

model Processo {
  id    Int     @default(autoincrement()) @id
  nome String 
  descricao String 
  observacao String 
  status Status @relation(fields: [statusID], references: [id])
  statusID Int
  prazo DateTime 
  tipoProcesso TipoProcesso @relation(fields: [tipoProcessoID], references: [id])
  tipoProcessoID Int  


  criadoPor Int 
  criadoEm DateTime @default(now()) 
  atualizadoPor Int? 
  atualizadoEm DateTime?
  removidoPor Int? 
  removidoEm DateTime?

  formularioPreenchido FormularioPreenchido[]
  lancamentos LancamentoProcesso[]
}



model FormularioPreenchido {
  id    Int     @default(autoincrement()) @id
  nome String  
  url String  
  formato String  
  processo Processo @relation(fields: [processoID], references: [id])
  processoID Int  

  criadoPor Int 
  criadoEm DateTime @default(now())
  atualizadoPor Int? 
  atualizadoEm DateTime?
  removidoPor Int? 
  removidoEm DateTime?
}

model Cliente {
  id    Int     @default(autoincrement()) @id
  nome String  
  email String  @unique
  telefone String  @unique
  cpf String  @unique
  rg String  @unique
  cnpj String  
  endereco   Endereco   @relation(fields: [enderecoID], references: [id])
  enderecoID Int

  criadoPor Int 
  criadoEm DateTime @default(now()) 
  atualizadoPor Int? 
  atualizadoEm DateTime?
  removidoPor Int? 
  removidoEm DateTime?

  documentos Documento[]
}


model Documento {
  id    Int     @default(autoincrement()) @id
  nome String  
  url String  
  formato String  
  cliente Cliente @relation(fields: [clienteID], references: [id])
  clienteID Int  

  criadoPor Int 
  criadoEm DateTime @default(now()) 
  atualizadoPor Int? 
  atualizadoEm DateTime?
  removidoPor Int? 
  removidoEm DateTime?
}


model LancamentoProcesso {
  id    Int     @default(autoincrement()) @id
  nome String 
  descricao String 
  status Status @relation(fields: [statusID], references: [id])
  statusID Int
  prazo DateTime 
  processo Processo @relation(fields: [processoID], references: [id])
  processoID Int  


  criadoPor Int 
  criadoEm DateTime @default(now()) 
  atualizadoPor Int? 
  atualizadoEm DateTime?
  removidoPor Int? 
  removidoEm DateTime?
}

model Status {
  id    Int     @default(autoincrement()) @id
  nome String 
  
  
  criadoPor Int 
  criadoEm DateTime @default(now()) 
  atualizadoPor Int? 
  atualizadoEm DateTime?
  removidoPor Int? 
  removidoEm DateTime?
  
  lancamentos LancamentoProcesso[]
  processos Processo[]
}